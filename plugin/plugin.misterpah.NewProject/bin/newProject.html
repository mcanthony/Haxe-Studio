<script src="../../../bin/js/jquery-2.0.3.min.js"></script>
<script src="../../../bin/js/bootstrap/bootstrap.min.js"></script>	
<script src="../../../bin/js/node.dir.walker.js"></script>

<link href="../../../bin/css/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="../../../bin/css/bootstrap-glyphicons.css" rel="stylesheet" media="screen">
<link href="../../../bin/css/bootstrap-notify.css" rel="stylesheet" media="screen">


<style>
.grayscale { 
  -webkit-filter: grayscale(100%);
  -moz-filter: grayscale(100%);
  -ms-filter: grayscale(100%);
  -o-filter: grayscale(100%);
  filter: grayscale(100%);
  filter: url(grayscale.svg); /* Firefox 4+ */
  filter: gray; /* IE 6-9 */
}


.box_shadow
{
-webkit-box-shadow: 0 0 10px 0 #eee;
box-shadow: 0 0 10px 0 #eee;
border:1px solid #ddd;
padding:10px;
-webkit-border-radius: 4px;
border-radius: 4px;
margin-bottom:10px;
}
</style>

<script>
var fs = require("fs");
function openProject(obj)
{
grayscale_all();
var id = $(obj).attr("meta");
$("#"+id).css("display","block");
$(obj).removeClass("grayscale");
$("#right_panel").css("display","block");
}

function grayscale_all()
{
$("#project_list").children().each(function()
	{
	$(this).addClass("grayscale");
	});
$("#project_desc").children().each(function()
	{
	$(this).css("display","none");
	});	
}

$(document).ready(function()
	{
	url = (document.URL).split("/");
	url.pop();
	path = "../"+url.slice(url.length-3,url.length).join("/")+"/template";
	//path = url.join("/")
	
	walk(path,function(p1,p2,p3){scan_project_template(p2);});
	});


function scan_project_template(filename)
	{
	for (var i = 0;i < filename.length;i++)
		{
		var ret = fs.readFileSync(filename[i],"utf-8");
		var data = JSON.parse(ret);
		$("#project_list").append(build_list(data));
		$("#project_desc").append(build_desc(data));
		}
	grayscale_all();
	}
	
function build_list(obj)
	{
	var result = ['<div meta="'+obj.name+'" onclick="openProject(this);" style="" class="col-xs-6">',
		'<div class="box_shadow">',
			'<img width="100%" src="./images/'+obj.logo+'">',
			'<div class="text-center">'+obj.name+'</div>',
		'</div>',
	'</div>'].join("\n");

	return result;
	}
	
function build_desc(obj)
	{
	var ret = ['<div id="'+obj.name+'" style="display:none;margin-top:10px;" class="col-xs-12">',
	'<div>'+obj.description+'</div>',
	'<div style="clear:both"></div>',
	'</div>'
	].join("\n");
	
	return ret;
	}
</script>


<h1>Create New Project</h1>
<hr></hr>

<div id="project_list"  class="col-xs-5" style="border-right:1px solid #eee">
 <p><b>Choose Template :</b></p>
</div>



<div id='right_panel' style="display:none;" class="col-xs-7" >
	<div class="col-xs-12">
		<label class="col-xs-4">Project folder</label>
		<input class="col-xs-8 text-right" type="file" nwdirectory/>
		<div style="clear:both"> </div>
	</div>
	<div id="project_desc">
	</div>
</div>


